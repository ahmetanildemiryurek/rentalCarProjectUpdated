<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <meta charset="UTF-8">
  <title>Müşteri Kayıt Ol</title>
  <script>
    // Form submit olduğunda çağrılacak fonksiyon
    function submitForm() {
      // Formdaki input alanlarından verileri al
      var firstName = document.getElementById('form3Example1').value;
      var lastName = document.getElementById('form3Example2').value;
      var username = document.getElementById('form3Example3').value;
      var password = document.getElementById('form3Example4').value;
      var passwordAgain = document.getElementById('form3Example5').value;

      // Verileri bir JavaScript nesnesine dönüştür
      var data = {
        firstName: firstName,
        lastName: lastName,
        username: username,
        password: password,
        passwordAgain: passwordAgain
      };

      // POST isteği için gerekli ayarları yap
      var xhr = new XMLHttpRequest();
      xhr.open('POST', '/register/postClientRegister', true);
      xhr.setRequestHeader('Content-Type', 'application/json');

      // Yanıt alındığında işlemleri gerçekleştir
      xhr.onload = function() {
        if (xhr.status === 200) {
          // Başarılı yanıt alındığında işlemleri yap
          console.log(xhr.responseText); // Yanıtı konsola yazdırabilirsiniz
          // Yönlendirme işlemini burada gerçekleştirebilirsiniz
          window.location.href = '/login';
        } else {
          // Hata durumunda işlemleri yap
          console.error(xhr.statusText);
          // Hata mesajını kullanıcıya gösterebilirsiniz
        }
      };

      // İsteği gönder
      xhr.send(JSON.stringify(data));
    }

  </script>
</head>
<body>
<!-- Section: Design Block -->
<section class="login">
  <!-- Jumbotron -->
  <div class="px-4 py-5 px-md-5 text-center text-lg-start" style="background-color: hsl(0, 0%, 96%)">
    <div class="container">
      <div class="row gx-lg-5 align-items-center">
        <div class="col-lg-6 mb-5 mb-lg-0">
          <h1 style="text-align: center" class="my-5 display-3 fw-bold ls-tight">
            DEMİRİLİK RENTAL CAR <br/>
            <span class="text-primary">KAYIT OL (Müşteri)</span>
          </h1>
          <p style="text-align: center; color: hsl(217, 10%, 50.8%)">
            Eğer Müşteri İseniz Sign Up Butonu ile kayıt olabilirsiniz.
          </p>

        </div>

        <div class="col-lg-6 mb-5 mb-lg-0">
          <div class="card">
            <div class="card-body py-5 px-md-5">
              <form style="text-align: center" th:action="@{/login}" method="post">
                <!-- 2 column grid layout with text inputs for the first and last names -->
                <div class="row">
                  <div class="col-md-6 mb-4">
                    <div class="form-outline">
                      <input type="text" id="form3Example1" class="form-control" placeholder="Ad" th:name="firstName"/>
                    </div>
                  </div>
                  <div class="col-md-6 mb-4">
                    <div class="form-outline">
                      <input type="text" id="form3Example2" class="form-control" placeholder="Soyad" th:name="lastName"/>
                    </div>
                  </div>
                </div>

                <!-- Email input -->
                <div class="form-outline mb-4">
                  <input type="text" id="form3Example3" class="form-control" placeholder="KullanıcıAdı" name="username" />
                </div>


                <!-- Password input -->
                <div class="form-outline mb-4">
                  <input type="password" id="form3Example4" class="form-control" placeholder="Şifre" name="password"/>
                </div>
                <div class="form-outline mb-4">
                  <input type="password" id="form3Example5" class="form-control" placeholder="Şifreni Tekrar Gir" th:name="passwordAgain"/>
                </div>

                <!-- Submit button -->
                <button type="submit" class="btn btn-primary btn-block mb-4" onclick="submitForm()">
                  Sign up
                </button>


                <div>
                  <p>Hesabın Varsa <a th:href="@{/login}">Giriş Yap</a></p>
                </div>

                <!-- Register buttons -->
                <div class="text-center">
                  <p>Bizi Takip Edebilirsiniz</p>
                  <button type="button" class="btn btn-link btn-floating mx-1">
                    <i class="fab fa-facebook"></i>
                  </button>

                  <button type="button" class="btn btn-link btn-floating mx-1">
                    <i class="fab fa-linkedin-in"></i>
                  </button>

                  <button type="button" class="btn btn-link btn-floating mx-1">
                    <i class="fab fa-twitter"></i>
                  </button>

                  <button type="button" class="btn btn-link btn-floating mx-1">
                    <i class="fab fa-instagram"></i>
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Jumbotron -->
</section>
<!-- Section: Design Block -->
</body>
</html>
